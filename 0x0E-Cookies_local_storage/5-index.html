<!DOCTYPE html>
<html lang="en" dir="ltr">

    <head>

        <meta charset="utf-8" />
        <title>Task 5</title>
        <script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script><!DOCTYPE html>
        <style>
            .logout {
                font-weight: normal;
                font-style: italic;
                margin-left: 10px;
            }
        </style>
        
            
    </head>
        
            <body>
                <div id="#form">
                    <h2>Login to the Website</h2>
                    <input id="firstname" placeholder="Firstname">
                    <input id="email" placeholder="Email">
                    <button type="button" class="btn1" onclick="setCookies()">Log me in</button>
                </div>
        
                <script>
                    function setCookies() {
                        let d = new(Date);
                        d.setTime(d.getTime() + 10*24*60*60*1000);
                        let expires = d.toGMTString();
                        document.cookie = `firstname=${document.getElementById("firstname").value}; expires=${expires}`;
                        document.cookie = `email=${document.getElementById("email").value}; expires=${expires}`;
                        showWelcomeMessageOrForm();
                    };
        
                    function showCookies() {
                        let p = document.createElement("p");
                        let firstname = getCookie("firstname");
                        let email = getCookie("email");
                        p.innerText = `Email: ${email} - Firstname: ${firstname}`;
                        document.body.appendChild(p);
                    };
        
                    function showForm() {
                        document.getElementById("form").style.display = "block";
                    };
        
                    function hideForm() {
                        document.getElementById("form").style.display = "none";
                    };
        
                    function deleteCookiesAndShowForm() {
                        Cookies.remove("firstname")
                        Cookies.remove("email")

                    showForm();
                    }
        
                    function showWelcomeMessageOrForm() {
                        if (Cookies.get("firstname").localeCompare("") === 0) {
                            showForm();
                        } else {
                            let firstname = Cookies.get("firstname");
                            let h1 = document.createElement("h1");
                            let a = document.createElement("a");

                            a.appendChild(document.createTextNode("(logout)"));
                            a.style.fontWeight = "normal";
                            a.style.fontStyle = "italic";
                            a.style.marginLeft = "10px";
                            a.addEventListener("click", deleteCookiesAndShowForm)

                            h1.appendChild(document.createTextNode("Welcome " + firstname));
                            h1.appendChild(a);
                            h1.setAttribute("id", "h1")
                            document.body.appendChild(h1);
                            hideForm();
                            }
                        };
                        showWelcomeMessageOrForm();
            </script>
     </body>
        
</html>